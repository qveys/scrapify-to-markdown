Integrate a Flutter module into your Android project
====================================================

1. [Add to app](/add-to-app) chevron\_right- [Add Flutter to Android](/add-to-app/android) chevron\_right- [Integrate Flutter](/add-to-app/android/project-setup)

Flutter can be embedded into your existing Android application piecemeal, as a source code Gradle subproject or as AARs.

The integration flow can be done using the Android Studio IDE with the [Flutter plugin](https://plugins.jetbrains.com/plugin/9212-flutter) or manually.

*warning* Warning

Your existing Android app might support architectures such as `mips` or `x86`. Flutter currently [only supports](/resources/faq#what-devices-and-os-versions-does-flutter-run-on) building ahead-of-time (AOT) compiled libraries for `x86_64`, `armeabi-v7a`, and `arm64-v8a`.

Consider using the [`abiFilters`](https://developer.android.com/reference/tools/gradle-api/4.2/com/android/build/api/dsl/Ndk#abiFilters:kotlin.collections.MutableSet) Android Gradle Plugin API to limit the supported architectures in your APK. Doing this avoids a missing `libflutter.so` runtime crash, for example:

* [Kotlin](#89-tab-panel)* [Groovy](#90-tab-panel)

MyApp/app/build.gradle.kts

kotlin

```
android {
    //...
    defaultConfig {
        ndk {
            // Filter for architectures supported by Flutter
            abiFilters += listOf("armeabi-v7a", "arm64-v8a", "x86_64")
        }
    }
}
```

MyApp/app/build.gradle

groovy

```
android {
    // ...
    defaultConfig {
        ndk {
            // Filter for architectures supported by Flutter
            abiFilters "armeabi-v7a", "arm64-v8a", "x86_64"
        }
    }
}
```

The Flutter engine also has an `x86_64` version. When using an emulator in debug Just-In-Time (JIT) mode, the Flutter module still runs correctly.

Integrate your Flutter module
-----------------------------

[#](#integrate-your-flutter-module)

* [With Android Studio](#91-tab-panel)* [Without Android Studio](#94-tab-panel)

### Integrate with Android Studio

[#](#integrate-with-android-studio)

The Android Studio IDE can help integrate your Flutter module. Using Android Studio, you can edit both your Android and Flutter code in the same IDE.

You can also use IntelliJ Flutter plugin functionality like Dart code completion, hot reload, and widget inspector.

To build your app, the Android Studio plugin configures your Android project to add your Flutter module as a dependency.

1. Open your Android project in Android Studio.- Go to **File** > **New** > **New Project...**. The **New Project** dialog displays.- Click **Flutter**.- If asked to provide your **Flutter SDK path**, do so and click **Next**.- Complete the configuration of your Flutter module.
           * If you have an existing project:

             1. To choose an existing project, click **...** to the right of the **Project location** box.* Navigate to your Flutter project directory.* Click **Open**.* If you need to create a new Flutter project:

               1. Complete the configuration dialog.* In the **Project type** menu, select **Module**.- Click **Finish**.

*lightbulb* Tip

By default, your project's Project pane might show the 'Android' view. If you can't see your new Flutter files in the Project pane, set your Project pane to display **Project Files**. This shows all files without filtering.

### Integrate without Android Studio

[#](#integrate-without-android-studio)

To integrate a Flutter module with an existing Android app manually, without using Flutter's Android Studio plugin, follow these steps:

#### Create a Flutter module

[#](#create-a-flutter-module)

Let's assume that you have an existing Android app at `some/path/MyApp`, and that you want your Flutter project as a sibling:

```
cd some/path/
flutter create -t module --org com.example flutter_module
```

This creates a `some/path/flutter_module/` Flutter module project with some Dart code to get you started and an `.android/` hidden subfolder. The `.android` folder contains an Android project that can both help you run a barebones standalone version of your Flutter module via `flutter run` and it's also a wrapper that helps bootstrap the Flutter module an embeddable Android library.

*info* Note

Add custom Android code to your own existing application's project or a plugin, not to the module in `.android/`. Changes made in your module's `.android/` directory won't appear in your existing Android project using the module.

Do not source control the `.android/` directory since it's autogenerated. Before building the module on a new machine, run `flutter pub get` in the `flutter_module` directory first to regenerate the `.android/` directory before building the Android project using the Flutter module.

*info* Note

To avoid Dex merging issues, `flutter.androidPackage` should not be identical to your host app's package name.

#### Java version requirement

[#](#java-version-requirement)

Flutter requires your project to declare compatibility with Java 11 or later.

Before attempting to connect your Flutter module project to your host Android app, ensure that your host Android app declares the following source compatibility within your app's `build.gradle` file, under the `android { }` block.

MyApp/app/build.gradle

groovy

```
android {
    // ...
    compileOptions {
        sourceCompatibility = 11 // The minimum value
        targetCompatibility = 11 // The minimum value
    }
}
```

#### Centralize repository settings

[#](#centralize-repository-settings)

Starting with Gradle 7, Android recommends using centralized repository declarations in `settings.gradle` instead of project or module level declarations in `build.gradle` files.

Before attempting to connect your Flutter module project to your host Android app, make the following changes.

1. Remove the `repositories` block in all of your app's `build.gradle` files.

   groovy

   ```
   // Remove the following block, starting on the next line
       repositories {
           google()
           mavenCentral()
       }
   // ...to the previous line
   ```

   - Add the `dependencyResolutionManagement` displayed in this step to the `settings.gradle` file.

* [Kotlin](#92-tab-panel)* [Groovy](#93-tab-panel)

settings.gradle.kts

kotlin

```
dependencyResolutionManagement {
    repositoriesMode.set(RepositoriesMode.PREFER_SETTINGS)
    val storageUrl: String = System.getenv("FLUTTER_STORAGE_BASE_URL") ?: "https://storage.googleapis.com"
    repositories {
        google()
        mavenCentral()
        maven("$storageUrl/download.flutter.io")
    }
}
```

settings.gradle

groovy

```
dependencyResolutionManagement {
    repositoriesMode = RepositoriesMode.PREFER_SETTINGS
    String storageUrl = System.env.FLUTTER_STORAGE_BASE_URL ?: "https://storage.googleapis.com"
    repositories {
        google()
        mavenCentral()
        maven {
            url = uri("$storageUrl/download.flutter.io")
        }
    }
}
```

Add the Flutter module as a dependency
--------------------------------------

[#](#add-the-flutter-module-as-a-dependency)

Add the Flutter module as a dependency of your existing app in Gradle. You can achieve this in two ways.

1. **Android archive** The AAR mechanism creates generic Android AARs as intermediaries that packages your Flutter module. This is good when your downstream app builders don't want to have the Flutter SDK installed. But, it adds one more build step if you build frequently.- **Module source code** The source code subproject mechanism is a convenient one-click build process, but requires the Flutter SDK. This is the mechanism used by the Android Studio IDE plugin.

* [Android Archive](#97-tab-panel)* [Module source code](#98-tab-panel)

### Depend on the Android Archive (AAR)

[#](#depend-on-the-android-archive-aar)

This option packages your Flutter library as a generic local Maven repository composed of AARs and POMs artifacts. This option allows your team to build the host app without installing the Flutter SDK. You can then distribute the artifacts from a local or remote repository.

Let's assume you built a Flutter module at `some/path/flutter_module`, and then run:

```
cd some/path/flutter_module
flutter build aar
```

Then, follow the on-screen instructions to integrate.

![](/assets/images/docs/development/add-to-app/android/project-setup/build-aar-instructions.png)

More specifically, this command creates (by default all debug/profile/release modes) a [local repository](https://docs.gradle.org/current/userguide/declaring_repositories.html#sub:maven_local), with the following files:

```
build/host/outputs/repo
└── com
    └── example
        └── flutter_module
            ├── flutter_release
            │   ├── 1.0
            │   │   ├── flutter_release-1.0.aar
            │   │   ├── flutter_release-1.0.aar.md5
            │   │   ├── flutter_release-1.0.aar.sha1
            │   │   ├── flutter_release-1.0.pom
            │   │   ├── flutter_release-1.0.pom.md5
            │   │   └── flutter_release-1.0.pom.sha1
            │   ├── maven-metadata.xml
            │   ├── maven-metadata.xml.md5
            │   └── maven-metadata.xml.sha1
            ├── flutter_profile
            │   ├── ...
            └── flutter_debug
                └── ...
```

To depend on the AAR, the host app must be able to find these files.

To do that, edit `settings.gradle` in your host app so that it includes the local repository and the dependency:

* [Kotlin](#95-tab-panel)* [Groovy](#96-tab-panel)

settings.gradle.kts

kotlin

```
dependencyResolutionManagement {
    repositoriesMode.set(RepositoriesMode.PREFER_SETTINGS)
    repositories {
        google()
        mavenCentral()
        maven("https://storage.googleapis.com/download.flutter.io")
    }
}
```

settings.gradle

groovy

```
dependencyResolutionManagement {
    repositoriesMode = RepositoriesMode.PREFER_SETTINGS
    repositories {
        google()
        mavenCentral()

        // Add the new repositories starting on the next line...
        maven {
            url = uri("some/path/flutter_module/build/host/outputs/repo")
            // This is relative to the location of the build.gradle file
            // if using a relative path.
        }

        maven {
            url = uri("https://storage.googleapis.com/download.flutter.io")
        }
        // ...to before this line  
    }
}
```

  

### Kotlin DSL based Android Project

[#](#kotlin-dsl-based-android-project)

After an `aar` build of a Kotlin DSL-based Android project, follow these steps to add the flutter\_module.

Include the flutter module as a dependency in the Android project's `app/build.gradle` file.

MyApp/app/build.gradle.kts

kotlin

```
android {
    buildTypes {
        release {
          ...
        }
        debug {
          ...
        }
        create("profile") {
            initWith(getByName("debug"))
        }
}

dependencies {
  // ...
  debugImplementation("com.example.flutter_module:flutter_debug:1.0")
  releaseImplementation("com.example.flutter_module:flutter_release:1.0")
  add("profileImplementation", "com.example.flutter_module:flutter_profile:1.0")
}
```

The `profileImplementation` ID is a custom `configuration` to be implemented in the `app/build.gradle` file of a host project.

host-project/app/build.gradle.kts

kotlin

```
configurations {
    getByName("profileImplementation") {
    }
}
```

MyApp/settings.gradle.kts

kotlin

```
include(":app")

dependencyResolutionManagement {
    repositories {
        maven(url = "https://storage.googleapis.com/download.flutter.io")
        maven(url = "some/path/flutter_module_project/build/host/outputs/repo")
    }
}
```

*error* Important

If you're located in China, use a mirror site rather than the `storage.googleapis.com` domain. To learn more about mirror sites, check out [Using Flutter in China](/community/china) page.

*lightbulb* Tip

You can also build an AAR for your Flutter module in Android Studio using the `Build > Flutter > Build AAR` menu.

![](/assets/images/docs/development/add-to-app/android/project-setup/ide-build-aar.png)

### Depend on the module's source code

[#](#depend-on-the-modules-source-code)

This option enables a one-step build for both your Android project and Flutter project. This option is convenient when you work on both parts simultaneously and rapidly iterate, but your team must install the Flutter SDK to build the host app.

*lightbulb* Tip

By default, the host app provides the `:app` Gradle project. To change the name of this project, set `flutter.hostAppProjectName` in the Flutter module's `gradle.properties` file. Include this project in the host app's `settings.gradle` file.

#### Updating `settings.gradle`

[#](#updating-settings-gradle)

Include the Flutter module as a subproject in the host app's `settings.gradle`. This example assumes `flutter_module` and `MyApp` exist in the same directory

If you are using Kotlin, apply the following changes:

MyApp/settings.gradle.kts

kotlin

```
// Include the host app project. Assumed existing content.
include(":app")            
// Replace "flutter_module" with whatever package_name you supplied when you ran:
// `$ flutter create -t module [package_name]
val filePath = settingsDir.parentFile.toString() + "/flutter_module/.android/include_flutter.groovy"
apply(from = File(filePath))
```

*warning* Warning

The ability to invoke `include_flutter.groovy` from Kotlin code requires Flutter 3.27. To determine your current Flutter version, run `flutter --version`. If it isn't at least version 3.27, consider changing to either the `main` or `beta` channels.

If you are using Groovy, apply the following changes:

MyApp/settings.gradle

groovy

```
// Include the host app project.
include(":app")                                   // assumed existing content
setBinding(new Binding([gradle: this]))           // new
def filePath = settingsDir.parentFile.toString() + "/flutter_module/.android/include_flutter.groovy" // new
apply from: filePath                              // new
```

The binding and script evaluation allows the Flutter module to `include` itself (as `:flutter`) and any Flutter plugins used by the module (such as `:package_info` and `:video_player`) in the evaluation context of your `settings.gradle`.

#### Updating `app/build.gradle`

[#](#updating-appbuild-gradle)

Introduce an `implementation` dependency on the Flutter module from your app:

MyApp/app/build.gradle

groovy

```
dependencies {
    implementation(project(":flutter"))
}
```

*info* Note

This code is identical between Groovy and Kotlin.

Your app now includes the Flutter module as a dependency.

Continue to the [Adding a Flutter screen to an Android app](/add-to-app/android/add-flutter-screen) guide.

Was this page's content helpful?

thumb\_up thumb\_down

Thank you for your feedback!

 [feedback Provide details](https://github.com/flutter/website/issues/new?template=1_page_issue.yml&&page-url=https://docs.flutter.dev/add-to-app/android/project-setup/&page-source=https://github.com/flutter/website/tree/main/src/content/add-to-app/android/project-setup.md)

Thank you for your feedback! Please let us know what we can do to improve.

 [bug\_report Provide details](https://github.com/flutter/website/issues/new?template=1_page_issue.yml&&page-url=https://docs.flutter.dev/add-to-app/android/project-setup/&page-source=https://github.com/flutter/website/tree/main/src/content/add-to-app/android/project-setup.md)

Unless stated otherwise, the documentation on this site reflects the latest stable version of Flutter. Page last updated on 2025-09-05. [View source](https://github.com/flutter/website/tree/main/src/content/add-to-app/android/project-setup.md) or [report an issue](https://github.com/flutter/website/issues/new?template=1_page_issue.yml&&page-url=https://docs.flutter.dev/add-to-app/android/project-setup/&page-source=https://github.com/flutter/website/tree/main/src/content/add-to-app/android/project-setup.md "Report an issue with this page").

[![Flutter logo](/assets/images/branding/flutter/logo+text/horizontal/white.svg)](https://flutter.dev)

Except as otherwise noted, this site is licensed under a [Creative Commons Attribution 4.0 International License](https://creativecommons.org/licenses/by/4.0/), and code samples are licensed under the [3-Clause BSD License](https://opensource.org/licenses/BSD-3-Clause).

* [Terms](/tos "Terms of use")* [Brand](/brand "Brand usage guidelines")* [Privacy](https://policies.google.com/privacy "Privacy policy")* [Security](/security "Security philosophy and practices")

   